# GUI 用户指南

本文档详细介绍 shmtu-auth 图形用户界面（GUI）的使用方法和功能特性。

## GUI 概览

shmtu-auth GUI 基于 PySide6 和 QFluentWidgets 开发，提供了现代化的 Fluent Design 界面风格，支持多主题、系统托盘等功能。

### 主要特性

- 🎨 **现代化界面** - 采用 Microsoft Fluent Design 设计语言
- 🌙 **多主题支持** - 支持浅色、深色和自动主题切换
- 📱 **系统托盘** - 最小化到系统托盘，不占用任务栏空间
- ⚡ **实时状态** - 实时显示网络认证状态和程序运行信息
- ⚙️ **可视化配置** - 图形化配置界面，无需手动编辑配置文件
- 📊 **状态监控** - 直观的状态指示器和详细的运行日志
- 🔄 **自动更新** - 支持检查和下载程序更新

## 启动 GUI

### Windows 平台

1. **可执行文件方式**:

   ```cmd
   # 双击运行 GUI 版本
   shmtu-auth-gui.exe
   
   # 或命令行启动
   shmtu-auth-gui.exe
   ```

2. **Python 方式**:

   ```cmd
   python src/shmtu_auth/main_gui.py
   ```

### macOS 平台

1. **应用程序方式**:
   - 双击 `SHMTU Auth.app`
   - 或从 Launchpad 启动

2. **命令行方式**:

   ```bash
   # 如果安装了 Python 包
   python -m shmtu_auth.main_gui
   
   # 或直接运行源码
   python src/shmtu_auth/main_gui.py
   ```

### Linux 平台

```bash
# Python 包方式
python -m shmtu_auth.main_gui

# 源码方式
python src/shmtu_auth/main_gui.py

# 如果有桌面文件
./shmtu-auth-gui.desktop
```

## 界面布局

### 系统托盘

程序最小化后会显示在系统托盘中，右键托盘图标可以看到：

- **显示主窗口** - 恢复主界面
- **开始/停止监控** - 控制认证监控
- **检查更新** - 手动检查程序更新
- **退出程序** - 完全关闭程序

## 功能界面详解

### 🏠 首页界面

首页是程序的主要控制面板，显示：

#### 快速状态卡片

- **网络状态** - 当前网络连接状态（已认证/未认证）
- **认证状态** - 自动认证功能的运行状态
- **用户信息** - 当前配置的用户数量
- **运行时间** - 程序持续运行时间

#### 快速操作按钮

- **开始监控** - 启动自动认证监控
- **停止监控** - 停止自动认证监控
- **立即认证** - 手动触发一次认证
- **测试网络** - 检查当前网络状态

### 📊 状态监控界面

监控界面提供详细的运行状态信息：

#### 实时状态

- **当前网络状态** - 详细的网络连接信息
- **最后认证时间** - 上次成功认证的时间
- **认证次数统计** - 成功/失败次数统计
- **网络质量** - 连接延迟和稳定性

#### 用户状态

- **用户列表** - 显示所有配置的用户
- **用户状态** - 每个用户的认证状态
- **轮换策略** - 当前使用的认证策略

#### 系统信息

- **程序版本** - 当前运行的程序版本
- **系统环境** - 操作系统和 Python 版本
- **配置来源** - 当前使用的配置文件路径

### ⚙️ 设置界面

设置界面分为多个选项卡：

#### 用户配置

- **用户管理**
  - 添加/删除用户
  - 修改用户密码
  - 设置密码加密
  - 用户优先级调整

#### 网络设置

- **检测间隔** - 设置认证状态检测间隔
- **重试设置** - 配置网络检查重试次数和间隔
- **超时设置** - 网络请求超时时间
- **User-Agent** - 自定义 HTTP 请求头

#### 界面设置

- **主题选择** - 浅色/深色/自动主题
- **语言设置** - 界面语言选择
- **启动设置** - 开机自启动配置
- **托盘设置** - 系统托盘行为配置

#### 通知设置

- **企业微信** - WebHook 配置
- **免打扰时间** - 通知静默时间段
- **通知类型** - 选择需要通知的事件

#### 高级设置

- **调试模式** - 开启详细日志记录
- **日志级别** - 设置日志记录级别
- **备份设置** - 配置文件备份选项
- **重置选项** - 恢复默认设置

### 📝 日志界面

日志界面提供程序运行的详细记录：

#### 日志显示

- **实时日志** - 滚动显示最新的日志信息
- **日志级别过滤** - 按 DEBUG/INFO/WARNING/ERROR 过滤
- **时间过滤** - 按时间范围过滤日志
- **关键字搜索** - 搜索特定的日志内容

#### 日志操作

- **复制日志** - 复制选中的日志内容
- **导出日志** - 保存日志到文件
- **清空日志** - 清除当前显示的日志
- **刷新日志** - 重新加载日志文件

#### 日志类型

- **认证日志** - 认证相关的操作记录
- **网络日志** - 网络检测和连接记录
- **系统日志** - 程序运行和错误信息
- **调试日志** - 详细的调试信息（需开启调试模式）

### ℹ️ 关于界面

关于界面显示：

- **程序信息** - 版本号、构建时间、开发者信息
- **许可证** - 开源许可证信息
- **项目链接** - GitHub 仓库、文档、反馈渠道
- **更新检查** - 检查最新版本和更新日志
- **系统信息** - 运行环境详细信息

## 使用流程

### 首次使用

1. **启动程序**

   ```bash
   # 双击可执行文件或命令行启动
   shmtu-auth-gui
   ```

2. **配置用户信息**
   - 打开设置界面
   - 在"用户配置"选项卡中添加学号和密码
   - 保存配置

3. **调整设置**（可选）
   - 设置检测间隔
   - 配置通知选项
   - 选择主题风格

4. **开始监控**
   - 返回首页
   - 点击"开始监控"按钮
   - 程序开始自动认证监控

### 日常使用

1. **启动程序** - 程序会记住上次的配置
2. **检查状态** - 查看首页的状态卡片
3. **最小化到托盘** - 点击最小化按钮
4. **通过托盘控制** - 右键托盘图标进行操作

### 问题诊断

1. **查看日志** - 打开日志界面检查错误信息
2. **测试网络** - 使用"测试网络"功能
3. **检查配置** - 在设置界面验证配置正确性
4. **重启监控** - 停止后重新开始监控

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+M` | 最小化到系统托盘 |
| `Ctrl+S` | 开始/停止监控 |
| `Ctrl+T` | 立即测试网络 |
| `Ctrl+L` | 打开日志界面 |
| `Ctrl+,` | 打开设置界面 |
| `F5` | 刷新当前界面 |
| `Ctrl+Q` | 退出程序 |
| `F1` | 打开帮助文档 |

## 主题和个性化

### 主题切换

1. **自动主题** - 跟随系统主题设置
2. **浅色主题** - 经典的浅色界面
3. **深色主题** - 护眼的深色界面

### 界面定制

- **字体大小** - 调整界面字体大小
- **窗口透明度** - 设置窗口透明效果（部分系统支持）
- **动画效果** - 开启/关闭界面动画
- **图标风格** - 选择不同的图标主题

## 系统集成

### 开机自启动

**Windows**:

- 程序会自动添加到开机启动项
- 可在设置中禁用自启动

**macOS**:

- 在"设置" → "用户与群组" → "登录项"中添加
- 或在程序设置中启用

**Linux**:

- 使用桌面环境的自启动管理器
- 或创建 systemd 用户服务

### 系统托盘行为

- **单击** - 显示/隐藏主窗口
- **双击** - 恢复主窗口并置于前台
- **右键** - 显示上下文菜单
- **中键** - 快速开始/停止监控（可配置）

## 性能优化

### 资源使用

- **内存占用** - 通常 50-100MB
- **CPU 使用** - 空闲时 < 1%，检测时 < 5%
- **网络流量** - 每次检测约 1-2KB

### 优化建议

1. **合理设置检测间隔** - 避免过于频繁的检测
2. **关闭不必要的动画** - 在低性能设备上
3. **定期清理日志** - 避免日志文件过大
4. **使用深色主题** - 在 OLED 屏幕上节省电量

## 故障排除

### 常见问题

#### GUI 无法启动

1. 检查是否安装了必要的依赖
2. 查看错误日志文件
3. 尝试命令行启动查看错误信息

#### 系统托盘图标不显示

1. 检查系统托盘设置
2. 重启程序
3. 检查系统是否支持托盘功能

#### 界面显示异常

1. 尝试切换主题
2. 重置界面设置
3. 检查显卡驱动是否正常

#### 设置无法保存

1. 检查配置文件权限
2. 确保磁盘空间充足
3. 查看错误日志

### 日志收集

如果遇到问题，请收集以下信息：

1. **程序版本** - 在关于界面查看
2. **系统信息** - 操作系统版本
3. **错误日志** - 从日志界面导出
4. **配置文件** - 去除敏感信息后提供
5. **重现步骤** - 详细的操作步骤

## 更新和维护

### 自动更新

程序支持自动检查更新：

1. **检查频率** - 每天启动时检查一次
2. **更新提醒** - 有新版本时会弹出通知
3. **下载更新** - 可以直接下载最新版本
4. **安装指导** - 提供安装新版本的指导

### 手动更新

1. **检查更新** - 在关于界面点击"检查更新"
2. **下载新版本** - 访问 GitHub Releases 页面
3. **备份配置** - 更新前备份当前配置
4. **安装新版本** - 替换旧版本文件

### 配置备份

```bash
# 手动备份配置
cp ~/.shmtu-auth/config.toml ~/.shmtu-auth/config.backup

# 或使用 GUI 的备份功能
# 设置 → 高级设置 → 备份配置
```

通过本指南，您应该能够熟练使用 shmtu-auth 的图形界面。如果遇到问题，请参考故障排除部分或查看项目的其他文档。
